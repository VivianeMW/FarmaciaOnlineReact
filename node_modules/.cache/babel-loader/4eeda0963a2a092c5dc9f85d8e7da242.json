{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Drew\\\\Documents\\\\VisualStudio\\\\pin3\\\\src\\\\components\\\\paginacao\\\\paginacao.js\";\nimport React, { Component } from 'react';\nimport api from '../../services/api';\nimport { ContextoUsuario } from '../Session';\nimport PaginacaoMain from './paginacaoMain';\nimport PaginacaoCarrinho from './paginacaoCarrinho/paginacaoCarrinho';\nimport '../../css/cssPaginacao.css';\nexport default class Paginacao extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      elemMostra: [],\n      page: 1,\n      pages: 1,\n      atualizar: false\n    };\n\n    this.carregaProdutos = async function (page = 1) {\n      debugger;\n      const _this$props = this.props,\n            tipo = _this$props.tipo,\n            limite = _this$props.limite;\n      const LIMIT_ITENS = limite;\n      let response = null;\n      let elementos = [];\n\n      switch (tipo) {\n        case 1:\n          //paginacao da pagina principal\n          if (typeof this.context.filtro === 'object') {\n            response = await api.get(\"/Produto\");\n          } else {\n            let oFiltro = JSON.parse(this.context.filtro);\n            response = await api.get(\"/Produto/conteudo=\".concat(oFiltro.conteudo, \"&filtro=\").concat(oFiltro.filtro));\n          }\n\n          elementos = response.data;\n          break;\n\n        case 2:\n          //paginacao da pagina de carrinho\n          let chaves = Object.keys(localStorage);\n          let qChaves = chaves.length; //quantidade de chaves\n\n          while (qChaves--) {\n            elementos.push(JSON.parse(localStorage.getItem(chaves[qChaves])));\n          }\n\n          break;\n      } // response = this.state.elementos;\n\n\n      let result = [];\n      let totalPage = Math.ceil(elementos.length / LIMIT_ITENS);\n      let count = page * LIMIT_ITENS - LIMIT_ITENS;\n      let delimitador = count + LIMIT_ITENS;\n\n      for (let i = count; i < delimitador; i++) {\n        if (elementos[i] != null) {\n          result.push(elementos[i]);\n        }\n      }\n\n      debugger;\n      this.setState({\n        elemMostra: result,\n        pages: totalPage,\n        page\n      });\n    };\n\n    this.renderPaginacao = () => {\n      const tipo = this.props.tipo;\n      const elemMostra = this.state.elemMostra;\n\n      switch (tipo) {\n        case 1:\n          //paginacao da pagina principal\n          return React.createElement(PaginacaoMain, {\n            produtos: elemMostra,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          });\n\n        case 2:\n          //paginacao da pagina carrinho\n          return React.createElement(PaginacaoCarrinho, {\n            produtos: elemMostra,\n            callbackParent: bool => this.onChildChanged(bool),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          });\n      }\n    };\n\n    this.nextPage = () => {\n      const _this$context = this.context,\n            pesquisar = _this$context.pesquisar,\n            pesquisarInativo = _this$context.pesquisarInativo;\n      const _this$state = this.state,\n            page = _this$state.page,\n            pages = _this$state.pages;\n\n      if (pesquisar) {\n        pesquisarInativo();\n      }\n\n      if (page == pages) {\n        return;\n      }\n\n      const nPagina = page + 1;\n      this.carregaProdutos(nPagina);\n    };\n\n    this.prevPage = () => {\n      const _this$context2 = this.context,\n            pesquisar = _this$context2.pesquisar,\n            pesquisarInativo = _this$context2.pesquisarInativo;\n      const page = this.state.page;\n\n      if (pesquisar) {\n        pesquisarInativo();\n      }\n\n      if (page == 1) {\n        return;\n      }\n\n      const nPagina = page - 1;\n      this.carregaProdutos(nPagina);\n    };\n  }\n\n  componentDidMount() {\n    const tipo = this.props.tipo;\n\n    switch (tipo) {\n      case 1:\n        //paginacao main\n        let pesquisarInativo = this.context.pesquisarInativo;\n        let tet = setInterval(pesquisarInativo, 1000);\n        break;\n    }\n\n    debugger;\n    this.carregaProdutos();\n  }\n\n  componentDidUpdate() {\n    const tipo = this.props.tipo;\n\n    switch (tipo) {\n      case 1:\n        //pagina main\n        let _this$context3 = this.context,\n            pesquisar = _this$context3.pesquisar,\n            pesquisarInativo = _this$context3.pesquisarInativo;\n\n        if (!pesquisar) {\n          return;\n        }\n\n        break;\n\n      case 2:\n        //page carrinho\n        if (!this.state.atualizar) {\n          return;\n        }\n\n        this.setState({\n          atualizar: false\n        });\n        break;\n    }\n\n    this.carregaProdutos();\n  }\n\n  onChildChanged(bool) {\n    this.setState({\n      atualizar: bool\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          elemMostra = _this$state2.elemMostra,\n          page = _this$state2.page,\n          pages = _this$state2.pages;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, this.renderPaginacao(), elemMostra.length > 0 ? React.createElement(\"footer\", {\n      className: \"rodape\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"paginacao\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      disabled: page == 1,\n      onClick: this.prevPage,\n      className: \"btn azul-roxo clicavel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Anterior\"), React.createElement(\"button\", {\n      disabled: page == pages,\n      onClick: this.nextPage,\n      className: \"btn azul-roxo clicavel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Proximo\"))) : \"\");\n  }\n\n}\nPaginacao.contextType = ContextoUsuario;","map":{"version":3,"sources":["C:\\Users\\Drew\\Documents\\VisualStudio\\pin3\\src\\components\\paginacao\\paginacao.js"],"names":["React","Component","api","ContextoUsuario","PaginacaoMain","PaginacaoCarrinho","Paginacao","state","elemMostra","page","pages","atualizar","carregaProdutos","props","tipo","limite","LIMIT_ITENS","response","elementos","context","filtro","get","oFiltro","JSON","parse","conteudo","data","chaves","Object","keys","localStorage","qChaves","length","push","getItem","result","totalPage","Math","ceil","count","delimitador","i","setState","renderPaginacao","bool","onChildChanged","nextPage","pesquisar","pesquisarInativo","nPagina","prevPage","componentDidMount","tet","setInterval","componentDidUpdate","render","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport api                 from '../../services/api';\r\nimport { ContextoUsuario } from '../Session';\r\n\r\nimport PaginacaoMain     from './paginacaoMain';\r\nimport PaginacaoCarrinho from './paginacaoCarrinho/paginacaoCarrinho';\r\n\r\nimport '../../css/cssPaginacao.css';\r\n\r\nexport default class Paginacao extends Component {\r\n\r\n    static contextType = ContextoUsuario;\r\n\r\n    state = {\r\n        elemMostra: [],\r\n        page     : 1,\r\n        pages    : 1,\r\n        atualizar : false\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { tipo } = this.props;\r\n\r\n        switch(tipo) {\r\n            case 1://paginacao main\r\n                let { pesquisarInativo } = this.context;\r\n                let tet = setInterval(pesquisarInativo, 1000);\r\n                break;\r\n        }\r\n\r\n        debugger;\r\n        this.carregaProdutos();\r\n    }\r\n\r\n    carregaProdutos = async function(page = 1) {\r\n        debugger\r\n        const { tipo, limite } = this.props;\r\n        const LIMIT_ITENS      = limite;\r\n        let response           = null;\r\n        let elementos          = [];\r\n\r\n        switch(tipo) {\r\n            case 1://paginacao da pagina principal\r\n                if(typeof this.context.filtro === 'object') {\r\n                    response = await api.get(`/Produto`);\r\n                } else {\r\n                    let oFiltro = JSON.parse(this.context.filtro);\r\n                    response = await api.get(`/Produto/conteudo=${oFiltro.conteudo}&filtro=${oFiltro.filtro}`);\r\n                }\r\n                elementos = response.data;\r\n                break;\r\n            case 2://paginacao da pagina de carrinho\r\n                let chaves  = Object.keys(localStorage);\r\n                let qChaves = chaves.length;//quantidade de chaves\r\n                while( qChaves-- ) {\r\n                    elementos.push(JSON.parse(localStorage.getItem(chaves[qChaves])));\r\n                }\r\n                break;\r\n\r\n        }\r\n \r\n        // response = this.state.elementos;\r\n\r\n        let result      = [];\r\n        let totalPage   = Math.ceil(elementos.length/LIMIT_ITENS); \r\n        let count       = (page * LIMIT_ITENS) - LIMIT_ITENS;\r\n        let delimitador = count + LIMIT_ITENS;\r\n       \r\n        for(let i = count; i < delimitador; i++) {\r\n            if(elementos[i] != null) {\r\n                result.push(elementos[i]);\r\n            }\r\n        }\r\n\r\n        debugger\r\n\r\n        this.setState({\r\n            elemMostra : result,\r\n            pages      : totalPage,\r\n            page,\r\n        });\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { tipo } = this.props;\r\n\r\n        switch(tipo) {\r\n            case 1://pagina main\r\n                let { pesquisar, pesquisarInativo } = this.context;\r\n                if(!pesquisar) {\r\n                    return;\r\n                }\r\n                break;\r\n            case 2://page carrinho\r\n                if(!this.state.atualizar) {\r\n                    return;\r\n                }\r\n        \r\n                this.setState({\r\n                    atualizar : false\r\n                });\r\n                break;    \r\n        }\r\n\r\n        this.carregaProdutos();\r\n    };\r\n\r\n    onChildChanged(bool) {\r\n        this.setState({\r\n            atualizar : bool\r\n        });\r\n    }\r\n\r\n    renderPaginacao = () => {\r\n        const { tipo }       = this.props;\r\n        const { elemMostra } = this.state;\r\n\r\n        switch(tipo) {\r\n            case 1://paginacao da pagina principal\r\n                return <PaginacaoMain produtos={elemMostra}/>\r\n            case 2://paginacao da pagina carrinho\r\n                return <PaginacaoCarrinho produtos={elemMostra} callbackParent={(bool) => this.onChildChanged(bool)} />\r\n\r\n        }\r\n    }\r\n\r\n    nextPage = () => {\r\n        const { pesquisar, pesquisarInativo } = this.context;\r\n        const { page, pages } = this.state;\r\n\r\n        if(pesquisar) {\r\n            pesquisarInativo();\r\n        }\r\n\r\n        if(page == pages) {\r\n            return;\r\n        }\r\n\r\n        const nPagina = page + 1;\r\n\r\n        this.carregaProdutos(nPagina);\r\n    };\r\n\r\n    prevPage = () => {\r\n        const { pesquisar, pesquisarInativo } = this.context;\r\n        const { page } = this.state;\r\n\r\n        if(pesquisar) {\r\n            pesquisarInativo();\r\n        }\r\n\r\n        if(page == 1) {\r\n            return;\r\n        }\r\n\r\n        const nPagina = page - 1;\r\n\r\n        this.carregaProdutos(nPagina);\r\n    };\r\n\r\n    render() {\r\n\r\n        const { elemMostra, page, pages } = this.state;\r\n\r\n        return (\r\n            <div>\r\n                {this.renderPaginacao()}\r\n                {elemMostra.length > 0? (\r\n                    <footer className=\"rodape\">\r\n                        <div className=\"paginacao\">\r\n                            <button \r\n                                disabled={page == 1}   \r\n                                onClick={this.prevPage}\r\n                                className=\"btn azul-roxo clicavel\"\r\n                            >\r\n                                Anterior\r\n                            </button>\r\n                            <button \r\n                                disabled={page == pages} \r\n                                onClick={this.nextPage}\r\n                                className=\"btn azul-roxo clicavel\"\r\n                            >\r\n                                Proximo\r\n                            </button>\r\n                        </div>\r\n                    </footer>\r\n                ) : \"\"}\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}