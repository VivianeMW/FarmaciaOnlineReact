{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Drew\\\\Documents\\\\VisualStudio\\\\pin3\\\\src\\\\pages\\\\pageMain.js\";\n\n/*\n    Esta é a página principal da aplicação\n*/\nimport React, { Component } from 'react';\nimport '../css/cssPageMain.css';\nimport api from '../services/api';\nimport Reme from '../img/reme1.jpg';\nimport { Link } from 'react-router-dom';\nimport NumberFormat from 'react-number-format';\nimport { ContextoUsuario } from '../components/Session';\nconst LIMIT_ITENS = 8;\nexport default class PageMain extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      produtos: [],\n      produto: {},\n      page: 1,\n      pages: 1,\n      filtrar: false\n    };\n\n    this.carregaProdutos = async function (page = 1) {\n      let response = null;\n      console.log(\"page:\" + page); // console.log(response.data);\n      // console.log('filtro: ' + JSON.parse(this.props.match.params.filtro));\n\n      if (typeof this.props.match.params.filtro === 'undefined') {\n        response = await api.get(\"/Produto\");\n      } else {\n        let oFiltro = JSON.parse(this.props.match.params.filtro);\n        ;\n        response = await api.get(\"/Produto/conteudo=\".concat(oFiltro.conteudo, \"&filtro=\").concat(oFiltro.filtro));\n      }\n\n      let result = [];\n      let totalPage = Math.ceil(response.data.length / LIMIT_ITENS);\n      let count = page * LIMIT_ITENS - LIMIT_ITENS;\n      let delimitador = count + LIMIT_ITENS;\n\n      for (let i = count; i < delimitador; i++) {\n        if (response.data[i] != null) {\n          result.push(response.data[i]);\n        }\n      }\n\n      this.setState({\n        produtos: result,\n        pages: totalPage,\n        page\n      });\n    };\n\n    this.adicionaLocalStorage = produto => {\n      localStorage.setItem(produto.id, JSON.stringify(produto));\n      this.setState({\n        redireciona: true\n      });\n    };\n\n    this.nextPage = () => {\n      const _this$state = this.state,\n            page = _this$state.page,\n            pages = _this$state.pages;\n\n      if (page == pages) {\n        return;\n      }\n\n      const nPagina = page + 1;\n      this.carregaProdutos(nPagina);\n    };\n\n    this.prevPage = () => {\n      const page = this.state.page;\n\n      if (page == 1) {\n        return;\n      }\n\n      const nPagina = page - 1;\n      this.carregaProdutos(nPagina);\n    };\n  }\n\n  componentDidMount() {\n    debugger;\n    const _this$context = this.context,\n          usuarioLogin = _this$context.usuarioLogin,\n          pesquisar = _this$context.pesquisar;\n    usuarioLogin();\n    this.carregaProdutos();\n  }\n\n  componentDidUpdate() {\n    this.carregaProdutos();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          produtos = _this$state2.produtos,\n          page = _this$state2.page,\n          pages = _this$state2.pages;\n    const authuser = this.props.authuser;\n    return React.createElement(\"div\", {\n      className: \"main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, produtos.length > 0 ? React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, produtos.map(produto => {\n      return React.createElement(\"li\", {\n        key: produto.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"div-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/produto/\".concat(produto.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"img-reme\",\n        src: Reme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"footer\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, produto.titulo), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, produto.descricao), React.createElement(\"div\", {\n        className: \"footer-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(NumberFormat, {\n        value: produto.preco,\n        displayType: 'text',\n        prefix: 'R$',\n        decimalSeparator: ',',\n        decimalScale: 2,\n        fixedDecimalScale: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: e => this.adicionaLocalStorage(produto),\n        className: \"btn-compra\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"ADD CARRINHO\")))));\n    })) : React.createElement(\"div\", {\n      className: \"empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Acabou :(\"), produtos.length > 0 ? React.createElement(\"footer\", {\n      className: \"footer-main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      disabled: page == 1,\n      onClick: this.prevPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Anterior\"), React.createElement(\"button\", {\n      disabled: page == pages,\n      onClick: this.nextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Proximo\"))) : \"\");\n  }\n\n}\nPageMain.contextType = ContextoUsuario;","map":{"version":3,"sources":["C:\\Users\\Drew\\Documents\\VisualStudio\\pin3\\src\\pages\\pageMain.js"],"names":["React","Component","api","Reme","Link","NumberFormat","ContextoUsuario","LIMIT_ITENS","PageMain","state","produtos","produto","page","pages","filtrar","carregaProdutos","response","console","log","props","match","params","filtro","get","oFiltro","JSON","parse","conteudo","result","totalPage","Math","ceil","data","length","count","delimitador","i","push","setState","adicionaLocalStorage","localStorage","setItem","id","stringify","redireciona","nextPage","nPagina","prevPage","componentDidMount","context","usuarioLogin","pesquisar","componentDidUpdate","render","authuser","map","titulo","descricao","preco","e","contextType"],"mappings":"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","sourcesContent":["/*\n    Esta é a página principal da aplicação\n*/\nimport React, { Component } from 'react';\n\nimport '../css/cssPageMain.css';\n\nimport api                 from '../services/api';\nimport Reme                from '../img/reme1.jpg';\nimport { Link }            from 'react-router-dom';\nimport NumberFormat        from 'react-number-format';\nimport { ContextoUsuario } from '../components/Session';\n\nconst LIMIT_ITENS = 8;\n\nexport default class PageMain extends Component {\n\n    static contextType = ContextoUsuario;\n\n    state = {\n        produtos : [],\n        produto  : {},\n        page     : 1,\n        pages    : 1,\n        filtrar  : false\n    };\n\n    componentDidMount() {\n        debugger;\n        const { usuarioLogin, pesquisar } = this.context;\n\n        usuarioLogin();\n\n        this.carregaProdutos();\n    };\n\n    componentDidUpdate() {\n        this.carregaProdutos();\n    };\n\n    carregaProdutos = async function(page = 1) {\n        let response = null;\n\n        console.log(\"page:\" + page);\n        // console.log(response.data);\n        // console.log('filtro: ' + JSON.parse(this.props.match.params.filtro));\n\n        if(typeof this.props.match.params.filtro === 'undefined') {\n            response = await api.get(`/Produto`);\n        } else {\n            let oFiltro = JSON.parse(this.props.match.params.filtro);;\n            response = await api.get(`/Produto/conteudo=${oFiltro.conteudo}&filtro=${oFiltro.filtro}`);\n        }\n\n        let result      = [];\n        let totalPage   = Math.ceil(response.data.length/LIMIT_ITENS); \n        let count       = (page * LIMIT_ITENS) - LIMIT_ITENS;\n        let delimitador = count + LIMIT_ITENS;\n\n        for(let i = count; i < delimitador; i++) {\n            if(response.data[i] != null) {\n                result.push(response.data[i]);\n            }\n        }\n\n        this.setState({\n            produtos : result,\n            pages    : totalPage,\n            page,\n        });\n\n    }\n\n    adicionaLocalStorage = produto => {\n\n        localStorage.setItem(produto.id, JSON.stringify(produto));\n        this.setState({\n            redireciona: true\n        });\n    };\n\n    nextPage = () => {\n        const { page, pages } = this.state;\n\n        if(page == pages) {\n            return;\n        }\n\n        const nPagina = page + 1;\n\n        this.carregaProdutos(nPagina);\n    };\n\n    prevPage = () => {\n        const { page } = this.state;\n\n        if(page == 1) {\n            return;\n        }\n\n        const nPagina = page - 1;\n\n        this.carregaProdutos(nPagina);\n    };\n    \n    render() {\n        const { produtos, page, pages } = this.state;\n        \n        const { authuser } = this.props;\n        return (\n            <div className=\"main-container\">\n                {produtos.length > 0 ? (\n                    <ul> \n                        {produtos.map(produto =>{\n                            return (\n                                <li key={produto.id}>\n                                    <div className=\"div-card\">\n                                        <Link to={`/produto/${produto.id}`}>\n                                            <header>\n                                                <img id=\"img-reme\" src={Reme}/>\n                                            </header>\n                                        </Link>\n                                        <hr/>\n                                        <footer>\n                                            <strong>{produto.titulo}</strong>\n                                            <p>{produto.descricao}</p>\n                                            <div className=\"footer-card\">\n                                                <span>\n                                                    <NumberFormat \n                                                        value={produto.preco} \n                                                        displayType={'text'}\n                                                        prefix={'R$'}\n                                                        decimalSeparator={','}\n                                                        decimalScale={2}\n                                                        fixedDecimalScale={true}\n                                                    />\n                                                </span>\n                                                {/* {this.state.produto = produto} */}\n                                                <button onClick={ e =>this.adicionaLocalStorage(produto)} className=\"btn-compra\">ADD CARRINHO</button>\n                                            </div>\n                                        </footer>\n                                    </div>\n                                </li>\n                            );\n                        })}     \n                    </ul>\n                ) : (\n                    <div className=\"empty\">\n                        Acabou :(\n                    </div>\n                )}\n\n                {produtos.length > 0? (\n                    <footer className=\"footer-main-container\">\n                        <div className=\"actions\">\n                            <button disabled={page == 1}     onClick={this.prevPage}>Anterior</button>\n                            <button disabled={page == pages} onClick={this.nextPage}>Proximo</button>\n                        </div>\n                    </footer>\n                ) : \"\"}\n            </div>\n        );\n    };\n\n}"]},"metadata":{},"sourceType":"module"}