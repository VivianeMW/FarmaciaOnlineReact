{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Drew\\\\Documents\\\\VisualStudio\\\\pin3\\\\src\\\\pages\\\\pagePedido.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { ContextoUsuario } from '../components/Session';\nimport Paginacao from '../components/paginacao/paginacao';\n\nclass PagePedido extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      pedidos: [],\n      redireciona: false,\n      page: 1,\n      pages: 1\n    };\n\n    this.carregaPedidos = async (page = 1) => {\n      let response = null;\n      let usuarioAutenticado = this.context.usuarioAutenticado;\n\n      if (usuarioAutenticado == null) {\n        return;\n      }\n\n      debugger;\n      response = await api.get(\"/Pedido/pedidos?usuid=\".concat(usuarioAutenticado.id));\n      let result = [];\n      let totalPage = Math.ceil(response.data.length / LIMIT_ITENS);\n      let count = page * LIMIT_ITENS - LIMIT_ITENS;\n      let delimitador = count + LIMIT_ITENS;\n\n      for (let i = count; i < delimitador; i++) {\n        if (response.data[i] != null) {\n          result.push(response.data[i]);\n        }\n      }\n\n      this.setState({\n        pedidos: result,\n        pages: totalPage,\n        page\n      });\n    };\n\n    this.redireciona = () => {\n      if (!this.state.redireciona) {\n        return;\n      }\n\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      });\n    };\n\n    this.nextPage = () => {\n      const _this$state = this.state,\n            page = _this$state.page,\n            pages = _this$state.pages;\n\n      if (page == pages) {\n        return;\n      }\n\n      const nPagina = page + 1;\n      this.carregaPedidos(nPagina);\n    };\n\n    this.prevPage = () => {\n      const page = this.state.page;\n\n      if (page == 1) {\n        return;\n      }\n\n      const nPagina = page - 1;\n      this.carregaPedidos(nPagina);\n    };\n  }\n\n  componentDidMount() {\n    let usuarioAutenticado = this.context.usuarioAutenticado;\n    let bRedireciona = false;\n\n    if (usuarioAutenticado == null) {\n      bRedireciona = true;\n    }\n\n    this.setState({\n      user: usuarioAutenticado,\n      redireciona: bRedireciona\n    });\n    this.carregaPedidos();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          user = _this$state2.user,\n          pedidos = _this$state2.pedidos,\n          page = _this$state2.page,\n          pages = _this$state2.pages;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.redireciona(), React.createElement(\"header\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"container-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Pedidos Realizados\"), pedidos.length > 0 ? React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, pedidos.map(pedido => {\n      return React.createElement(\"li\", {\n        key: pedido._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"ID:\"), pedido.id), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Data:\"), pedido.data), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"N\\xBA pedido:\"), pedido.nPedido), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Pre\\xE7o:\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(NumberFormat, {\n        value: pedido.preco,\n        displayType: 'text',\n        prefix: 'R$',\n        decimalSeparator: ',',\n        decimalScale: 2,\n        fixedDecimalScale: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Status:\"), pedido.status)));\n    })) : React.createElement(\"div\", {\n      className: \"empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Acabou :(\")), pedidos.length > 0 ? React.createElement(\"footer\", {\n      className: \"rodape\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"paginacao\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      disabled: page == 1,\n      onClick: this.prevPage,\n      className: \"btn azul-roxo clicavel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Anterior\"), React.createElement(\"button\", {\n      disabled: page == pages,\n      onClick: this.nextPage,\n      className: \"btn azul-roxo clicavel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Proximo\"))) : \"\");\n  }\n\n}\n\nPagePedido.contextType = ContextoUsuario;\nexport default PagePedido;","map":{"version":3,"sources":["C:\\Users\\Drew\\Documents\\VisualStudio\\pin3\\src\\pages\\pagePedido.js"],"names":["React","Component","Redirect","ContextoUsuario","Paginacao","PagePedido","state","user","pedidos","redireciona","page","pages","carregaPedidos","response","usuarioAutenticado","context","api","get","id","result","totalPage","Math","ceil","data","length","LIMIT_ITENS","count","delimitador","i","push","setState","nextPage","nPagina","prevPage","componentDidMount","bRedireciona","render","map","pedido","_id","nPedido","preco","status","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { ContextoUsuario } from '../components/Session';\r\nimport Paginacao           from '../components/paginacao/paginacao';\r\n\r\nclass PagePedido extends Component {\r\n\r\n    static contextType = ContextoUsuario;\r\n\r\n    state = {\r\n        user        : {},\r\n        pedidos     : [],\r\n        redireciona : false,\r\n        page        : 1,\r\n        pages       : 1,\r\n    }\r\n\r\n    componentDidMount() {\r\n        let { usuarioAutenticado } = this.context;\r\n        let  bRedireciona = false;\r\n\r\n        if(usuarioAutenticado == null) {\r\n            bRedireciona = true;\r\n        }\r\n\r\n        this.setState({\r\n            user : usuarioAutenticado,\r\n            redireciona : bRedireciona\r\n        });\r\n\r\n        this.carregaPedidos();\r\n    }\r\n\r\n    carregaPedidos = async (page = 1) => {\r\n        let response =  null;\r\n        let { usuarioAutenticado } = this.context;\r\n\r\n        if(usuarioAutenticado == null) {\r\n            return;\r\n        }\r\n\r\n        debugger;\r\n        response = await api.get(`/Pedido/pedidos?usuid=${usuarioAutenticado.id}`);\r\n\r\n        let result      = [];\r\n        let totalPage   = Math.ceil(response.data.length/LIMIT_ITENS); \r\n        let count       = (page * LIMIT_ITENS) - LIMIT_ITENS;\r\n        let delimitador = count + LIMIT_ITENS;\r\n\r\n        for(let i = count; i < delimitador; i++) {\r\n            if(response.data[i] != null) {\r\n                result.push(response.data[i]);\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            pedidos : result,\r\n            pages   : totalPage,\r\n            page,\r\n        });\r\n    }\r\n\r\n    redireciona = () => {\r\n        if(!this.state.redireciona) {\r\n            return;\r\n        }\r\n\r\n        return <Redirect to={\"/\"}/>\r\n    }\r\n\r\n    nextPage = () => {\r\n        const { page, pages } = this.state;\r\n\r\n        if(page == pages) {\r\n            return;\r\n        }\r\n\r\n        const nPagina = page + 1;\r\n\r\n        this.carregaPedidos(nPagina);\r\n    };\r\n\r\n    prevPage = () => {\r\n        const { page } = this.state;\r\n\r\n        if(page == 1) {\r\n            return;\r\n        }\r\n\r\n        const nPagina = page - 1;\r\n\r\n        this.carregaPedidos(nPagina);\r\n    };\r\n\r\n    render() {\r\n        const { user, pedidos, page, pages } = this.state;\r\n\r\n        return (\r\n            <div>\r\n                {this.redireciona()}\r\n                <header><Navbar /></header>\r\n                <div className=\"container-list\">\r\n                    <h3>Pedidos Realizados</h3>\r\n                    {pedidos.length>0 ? (\r\n                        <ul>\r\n                            {pedidos.map(pedido => {\r\n                                return (\r\n                                    <li key={pedido._id}>\r\n                                        <div className=\"container-list\">\r\n                                            <hr/>\r\n                                            <p><strong>ID:</strong>{pedido.id}</p>\r\n                                            <p><strong>Data:</strong>{pedido.data}</p>\r\n                                            <p><strong>Nº pedido:</strong>{pedido.nPedido}</p>\r\n                                            <p>\r\n                                                <strong>Preço:</strong>\r\n                                                <span>\r\n                                                    <NumberFormat\r\n                                                        value={pedido.preco}\r\n                                                        displayType={'text'}\r\n                                                        prefix={'R$'}\r\n                                                        decimalSeparator={','}\r\n                                                        decimalScale={2}\r\n                                                        fixedDecimalScale={true}\r\n                                                    />\r\n                                                </span>\r\n                                            </p>\r\n                                            <p><strong>Status:</strong>{pedido.status}</p>\r\n                                        </div>\r\n                                    </li>\r\n                                );\r\n                            })}\r\n                        </ul>\r\n                    ):(\r\n                        <div className=\"empty\">\r\n                            Acabou :(\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {pedidos.length > 0? (\r\n                    <footer className=\"rodape\">\r\n                        <div className=\"paginacao\">\r\n                            <button \r\n                                disabled={page == 1}   \r\n                                onClick={this.prevPage}\r\n                                className=\"btn azul-roxo clicavel\"\r\n                            >\r\n                                Anterior\r\n                            </button>\r\n                            <button \r\n                                disabled={page == pages} \r\n                                onClick={this.nextPage}\r\n                                className=\"btn azul-roxo clicavel\"\r\n                            >\r\n                                Proximo\r\n                            </button>\r\n                        </div>\r\n                    </footer>\r\n                ) : \"\"}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PagePedido;"]},"metadata":{},"sourceType":"module"}