{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Drew\\\\Documents\\\\VisualStudio\\\\pin3\\\\src\\\\pages\\\\pageCarrinho.js\";\nimport React, { Component } from 'react';\nimport '../css/cssPageCarrinho.css';\nimport ImgReme from '../img/reme1.jpg';\nimport NumberFormat from 'react-number-format';\nimport { Link } from 'react-router-dom';\nimport { ContextoUsuario } from '../components/Session';\nconst LIMIT_ITENS = 3;\nexport default class PageCarrinho extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      produtos: [],\n      tProdutos: [],\n      produto: {},\n      page: 1,\n      pages: 1,\n      atualizar: false\n    };\n\n    this.carregaProdutos = async (page = 1) => {\n      let aProdutos = [],\n          chaves = Object.keys(localStorage),\n          i = chaves.length;\n\n      while (i--) {\n        aProdutos.push(JSON.parse(localStorage.getItem(chaves[i])));\n      }\n\n      let result = [];\n      let totalPage = Math.ceil(aProdutos.length / LIMIT_ITENS);\n      let count = page * LIMIT_ITENS - LIMIT_ITENS;\n      let delimitador = count + LIMIT_ITENS;\n\n      for (let i = count; i < delimitador; i++) {\n        if (aProdutos[i] != null) {\n          result.push(aProdutos[i]);\n        }\n      }\n\n      this.setState({\n        produtos: result,\n        tProdutos: aProdutos,\n        pages: totalPage,\n        page\n      });\n    };\n\n    this.removeLocalStorege = id => {\n      localStorage.removeItem(id);\n      this.setState({\n        atualizar: true\n      });\n    };\n\n    this.getPrecoTotal = () => {\n      const tProdutos = this.state.tProdutos;\n      let preco = 0;\n\n      for (let i = 0; i < tProdutos.length; i++) {\n        if (isNaN(tProdutos[i].preco)) {\n          continue;\n        }\n\n        preco += tProdutos[i].preco;\n      }\n\n      return preco;\n    };\n\n    this.nextPage = () => {\n      const _this$state = this.state,\n            page = _this$state.page,\n            pages = _this$state.pages;\n\n      if (page == pages) {\n        return;\n      }\n\n      const nPagina = page + 1;\n      this.carregaProdutos(nPagina);\n    };\n\n    this.prevPage = () => {\n      const page = this.state.page;\n\n      if (page == 1) {\n        return;\n      }\n\n      const nPagina = page - 1;\n      this.carregaProdutos(nPagina);\n    };\n  }\n\n  componentDidMount() {\n    this.carregaProdutos();\n  }\n\n  componentDidUpdate() {\n    if (!this.state.atualizar) {\n      return;\n    }\n\n    this.setState({\n      atualizar: false\n    });\n    this.carregaProdutos();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          produtos = _this$state2.produtos,\n          page = _this$state2.page,\n          pages = _this$state2.pages;\n    return React.createElement(\"div\", {\n      className: \"main-container-carrinho\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, produtos.length > 0 ? React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, produtos.map(produto => {\n      return React.createElement(\"li\", {\n        key: produto.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"div-card-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"h-titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Produto\"), React.createElement(\"h5\", {\n        className: \"h-titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Descricao\"), React.createElement(\"h5\", {\n        className: \"h-titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Quantidade\"), React.createElement(\"h5\", {\n        className: \"h-titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Data\"), React.createElement(\"h5\", {\n        className: \"h-titulo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Pre\\xE7o\"), React.createElement(\"div\", {\n        className: \"div-img-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"img-reme-peq\",\n        src: ImgReme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"div-descricao-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, produto.descricao)), React.createElement(\"div\", {\n        className: \"div-qtd-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, produto.quantidade > 0 ? React.createElement(\"select\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"1\",\n        label: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"1\"), React.createElement(\"option\", {\n        value: \"3\",\n        label: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"3\"), React.createElement(\"option\", {\n        value: \"5\",\n        label: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"5\")) : React.createElement(\"select\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"0\",\n        label: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"0\")), React.createElement(\"button\", {\n        onClick: e => this.removeLocalStorege(produto.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"remover\")), React.createElement(\"div\", {\n        className: \"div-entrega-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"10/10/2019\")), React.createElement(\"div\", {\n        className: \"div-preco-carrinho\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(NumberFormat, {\n        value: produto.preco,\n        displayType: 'text',\n        prefix: 'R$',\n        decimalSeparator: ',',\n        decimalScale: 2,\n        fixedDecimalScale: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }))));\n    })) : React.createElement(\"div\", {\n      className: \"empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"N\\xE3o h\\xE1 itens no carrinho :(\"), produtos.length > 0 ? React.createElement(\"div\", {\n      className: \"div-resumo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Resumo Pedido\"), React.createElement(\"div\", {\n      className: \"itens-resumo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Subtotal(\", produtos.length, \" produto(os))\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(NumberFormat, {\n      value: this.getPrecoTotal(),\n      displayType: 'text',\n      prefix: 'R$',\n      decimalSeparator: ',',\n      decimalScale: 2,\n      fixedDecimalScale: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"itens-resumo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Frete\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(NumberFormat, {\n      value: this.getPrecoTotal(),\n      displayType: 'text',\n      prefix: 'R$',\n      decimalSeparator: ',',\n      decimalScale: 2,\n      fixedDecimalScale: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"itens-resumo-total\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Total\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(NumberFormat, {\n      value: this.getPrecoTotal(),\n      displayType: 'text',\n      prefix: 'R$',\n      decimalSeparator: ',',\n      decimalScale: 2,\n      fixedDecimalScale: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/Compra/Endereco\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn-compra\",\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Comprar\")))) : \"\"), produtos.length > 0 ? React.createElement(\"footer\", {\n      className: \"footer-main-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      disabled: page == 1,\n      onClick: this.prevPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Anterior\"), React.createElement(\"button\", {\n      disabled: page == pages,\n      onClick: this.nextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"Proximo\"))) : \"\");\n  }\n\n}\nPageCarrinho.contextType = ContextoUsuario;","map":{"version":3,"sources":["C:\\Users\\Drew\\Documents\\VisualStudio\\pin3\\src\\pages\\pageCarrinho.js"],"names":["React","Component","ImgReme","NumberFormat","Link","ContextoUsuario","LIMIT_ITENS","PageCarrinho","state","produtos","tProdutos","produto","page","pages","atualizar","carregaProdutos","aProdutos","chaves","Object","keys","localStorage","i","length","push","JSON","parse","getItem","result","totalPage","Math","ceil","count","delimitador","setState","removeLocalStorege","id","removeItem","getPrecoTotal","preco","isNaN","nextPage","nPagina","prevPage","componentDidMount","componentDidUpdate","render","map","descricao","quantidade","e","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport '../css/cssPageCarrinho.css';\n\nimport ImgReme      from '../img/reme1.jpg';\nimport NumberFormat from 'react-number-format';\n\nimport { Link } from 'react-router-dom';\n\nimport { ContextoUsuario } from '../components/Session';\n\nconst LIMIT_ITENS = 3;\n\nexport default class PageCarrinho extends Component {\n\n    static contextType = ContextoUsuario;\n\n    state = {\n        produtos  : [],\n        tProdutos : [],\n        produto   : {},\n        page      : 1,\n        pages     : 1, \n        atualizar : false\n    }\n\n    componentDidMount() {\n        this.carregaProdutos();\n    };\n\n    componentDidUpdate() {\n        if(!this.state.atualizar) {\n            return;\n        }\n\n        this.setState({\n            atualizar : false\n        });\n\n        this.carregaProdutos();\n    };\n\n    carregaProdutos = async (page = 1) => {\n        let aProdutos = [],\n            chaves    = Object.keys(localStorage),\n            i         = chaves.length;\n\n        while( i-- ) {\n            aProdutos.push(JSON.parse(localStorage.getItem(chaves[i])));\n        }    \n\n        let result      = [];\n        let totalPage   = Math.ceil(aProdutos.length/LIMIT_ITENS); \n        let count       = (page * LIMIT_ITENS) - LIMIT_ITENS;\n        let delimitador = count + LIMIT_ITENS;\n\n        for(let i = count; i < delimitador; i++) {\n            if(aProdutos[i] != null) {\n                result.push(aProdutos[i]);\n            }\n        }\n\n        this.setState({\n            produtos : result,\n            tProdutos: aProdutos,\n            pages    : totalPage,\n            page\n        });\n    };\n\n    removeLocalStorege = (id) => {\n        localStorage.removeItem(id);\n        this.setState({\n            atualizar : true\n        });\n    };\n\n    getPrecoTotal = () => {\n        const { tProdutos } = this.state;\n        let preco = 0;\n\n        for(let i = 0; i < tProdutos.length; i++) {\n            if(isNaN(tProdutos[i].preco)) {\n                continue;\n            }\n            preco += tProdutos[i].preco;\n        }\n\n        return preco;\n    };\n\n    nextPage = () => {\n        const { page, pages } = this.state;\n\n        if(page == pages) {\n            return;\n        }\n\n        const nPagina = page + 1;\n\n        this.carregaProdutos(nPagina);\n    };\n\n    prevPage = () => {\n        const { page } = this.state;\n\n        if(page == 1) {\n            return;\n        }\n\n        const nPagina = page - 1;\n\n        this.carregaProdutos(nPagina);\n    };\n\n    render() {\n        const { produtos, page, pages } = this.state;\n        return (\n            <div className=\"main-container-carrinho\">\n                <div className=\"grid-main\">\n                    {produtos.length > 0? (\n                        <ul>\n                            {produtos.map(produto =>{\n                                return (\n                                    <li key={produto.id}>\n                                        <div className=\"div-card-carrinho\">\n                                            <h5 className=\"h-titulo\">Produto</h5>\n                                            <h5 className=\"h-titulo\">Descricao</h5>\n                                            <h5 className=\"h-titulo\">Quantidade</h5>\n                                            <h5 className=\"h-titulo\">Data</h5>\n                                            <h5 className=\"h-titulo\">Preço</h5>\n                                            <div className=\"div-img-carrinho\">\n                                            <img id=\"img-reme-peq\" src={ImgReme}/> \n                                            </div>\n                                            <div className=\"div-descricao-carrinho\">\n                                                <p>{produto.descricao}</p>\n                                            </div>\n                                            <div className=\"div-qtd-carrinho\">\n                                                    {produto.quantidade > 0? (\n                                                        <select>\n                                                            <option value=\"1\" label=\"1\">1</option>\n                                                            <option value=\"3\" label=\"3\">3</option>\n                                                            <option value=\"5\" label=\"5\">5</option>\n                                                        </select>\n                                                    ) : (\n                                                        <select>\n                                                            <option value=\"0\" label=\"0\">0</option>\n                                                        </select>\n                                                    )}\n                                                    <button onClick={e => this.removeLocalStorege(produto.id)}>remover</button>\n                                            </div>\n                                            <div className=\"div-entrega-carrinho\">\n                                                <span>10/10/2019</span>\n                                            </div>\n                                            <div className=\"div-preco-carrinho\">\n                                               <NumberFormat \n                                                    value={produto.preco} \n                                                    displayType={'text'}\n                                                    prefix={'R$'}\n                                                    decimalSeparator={','}\n                                                    decimalScale={2}\n                                                    fixedDecimalScale={true}\n                                                />\n                                            </div>\n                                        </div>\n                                    </li>\n                                );\n                            })}    \n                        </ul>\n                    ): (\n                        <div className=\"empty\">\n                            Não há itens no carrinho :(\n                        </div>\n                    )}\n\n                    {produtos.length > 0 ? (\n                        <div className=\"div-resumo\">\n                            <strong>Resumo Pedido</strong>\n                            <div className=\"itens-resumo\">\n                                <span>Subtotal({produtos.length} produto(os))</span>\n                                <span>\n                                    <NumberFormat \n                                        value={this.getPrecoTotal()} \n                                        displayType={'text'}\n                                        prefix={'R$'}\n                                        decimalSeparator={','}\n                                        decimalScale={2}\n                                        fixedDecimalScale={true}\n                                    />\n                                </span>\n                            </div>\n                            <div  className=\"itens-resumo\">\n                                <span>Frete</span>\n                                <span>\n                                    <NumberFormat \n                                        value={this.getPrecoTotal()} \n                                        displayType={'text'}\n                                        prefix={'R$'}\n                                        decimalSeparator={','}\n                                        decimalScale={2}\n                                        fixedDecimalScale={true}\n                                    />\n                                </span>\n                            </div>\n                            <hr/>\n                            <div className=\"itens-resumo-total\">\n                                <span>Total</span>\n                                <span>\n                                    <NumberFormat \n                                        value={this.getPrecoTotal()} \n                                        displayType={'text'}\n                                        prefix={'R$'}\n                                        decimalSeparator={','}\n                                        decimalScale={2}\n                                        fixedDecimalScale={true}\n                                    />\n                                </span>\n                            </div>\n                            <hr/>\n                            <Link to={\"/Compra/Endereco\"}>\n                                <span><button className=\"btn-compra\" type=\"button\">Comprar</button></span>\n                            </Link>\n                        </div>\n                    ) : \"\"}\n                </div>\n                \n               \n                {produtos.length > 0? (\n                    <footer className=\"footer-main-container\">\n                        <div className=\"actions\">\n                            <button disabled={page == 1}     onClick={this.prevPage}>Anterior</button>\n                            <button disabled={page == pages} onClick={this.nextPage}>Proximo</button>\n                        </div>\n                    </footer>\n                ) : \"\"}\n            </div>\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}